pcDosPalette = {"00": [0, 0, 0]};
let colordisable = "fill:#321332";
let pal0 = true;
let pal1 = true;
let pal2 = true;
let pal3 = true;
let pal4 = true;
let pal5 = true;
let pal6 = true;
let pal7 = true;
let pal8 = true;
let pal9 = true;
let palA = true;
let palB = true;
let palC = true;
let palD = true;
let palE = true;
let palF = true;
let pal10 = true;
let pal11 = true;
let pal12 = true;
let pal13 = true;
let pal14 = true;
let pal15 = true;
let pal16 = true;
let pal17 = true;
let pal18 = true;
let pal19 = true;
let pal1A = true;
let pal1B = true;
let pal1C = true;
let pal1D = true;
let pal1EX = true;
let pal1F = true;
let pal20 = true;
let pal21 = true;
let pal22 = true;
let pal23 = true;
let pal24 = true;
let pal25 = true;
let pal26 = true;
let pal27 = true;
let pal28 = true;
let pal29 = true;
let pal2A = true;
let pal2B = true;
let pal2C = true;
let pal2D = true;
let pal2EX = true;
let pal2F = true;
let pal30 = true;
let pal31 = true;
let pal32 = true;
let pal33 = true;
let pal34 = true;
let pal35 = true;
let pal36 = true;
let pal37 = true;
let pal38 = true;
let pal39 = true;
let pal3A = true;
let pal3B = true;
let pal3C = true;
let pal3D = true;
let pal3EX = true;
let pal3F = true;
let pal40 = true;
let pal41 = true;
let pal42 = true;
let pal43 = true;
let pal44 = true;
let pal45 = true;
let pal46 = true;
let pal47 = true;
let pal48 = true;
let pal49 = true;
let pal4A = true;
let pal4B = true;
let pal4C = true;
let pal4D = true;
let pal4EX = true;
let pal4F = true;
let pal50 = true;
let pal51 = true;
let pal52 = true;
let pal53 = true;
let pal54 = true;
let pal55 = true;
let pal56 = true;
let pal57 = true;
let pal58 = true;
let pal59 = true;
let pal5A = true;
let pal5B = true;
let pal5C = true;
let pal5D = true;
let pal5EX = true;
let pal5F = true;
let pal60 = true;
let pal61 = true;
let pal62 = true;
let pal63 = true;
let pal64 = true;
let pal65 = true;
let pal66 = true;
let pal67 = true;
let pal68 = true;
let pal69 = true;
let pal6A = true;
let pal6B = true;
let pal6C = true;
let pal6D = true;
let pal6EX = true;
let pal6F = true;
let pal70 = true;
let pal71 = true;
let pal72 = true;
let pal73 = true;
let pal74 = true;
let pal75 = true;
let pal76 = true;
let pal77 = true;
let pal78 = true;
let pal79 = true;
let pal7A = true;
let pal7B = true;
let pal7C = true;
let pal7D = true;
let pal7EX = true;
let pal7F = true;
let pal0E = document.getElementById("pal0")
let pal1E = document.getElementById("pal1")
let pal2E = document.getElementById("pal2")
let pal3E = document.getElementById("pal3")
let pal4E = document.getElementById("pal4")
let pal5E = document.getElementById("pal5")
let pal6E = document.getElementById("pal6")
let pal7E = document.getElementById("pal7")
let pal8E = document.getElementById("pal8")
let pal9E = document.getElementById("pal9")
let palAE = document.getElementById("palA")
let palBE = document.getElementById("palB")
let palCE = document.getElementById("palC")
let palDE = document.getElementById("palD")
let palEE = document.getElementById("palE")
let palFE = document.getElementById("palF")
let pal10E = document.getElementById("pal10")
let pal11E = document.getElementById("pal11")
let pal12E = document.getElementById("pal12")
let pal13E = document.getElementById("pal13")
let pal14E = document.getElementById("pal14")
let pal15E = document.getElementById("pal15")
let pal16E = document.getElementById("pal16")
let pal17E = document.getElementById("pal17")
let pal18E = document.getElementById("pal18")
let pal19E = document.getElementById("pal19")
let pal1AE = document.getElementById("pal1A")
let pal1BE = document.getElementById("pal1B")
let pal1CE = document.getElementById("pal1C")
let pal1DE = document.getElementById("pal1D")
let pal1EE = document.getElementById("pal1E")
let pal1FE = document.getElementById("pal1F")
let pal20E = document.getElementById("pal20")
let pal21E = document.getElementById("pal21")
let pal22E = document.getElementById("pal22")
let pal23E = document.getElementById("pal23")
let pal24E = document.getElementById("pal24")
let pal25E = document.getElementById("pal25")
let pal26E = document.getElementById("pal26")
let pal27E = document.getElementById("pal27")
let pal28E = document.getElementById("pal28")
let pal29E = document.getElementById("pal29")
let pal2AE = document.getElementById("pal2A")
let pal2BE = document.getElementById("pal2B")
let pal2CE = document.getElementById("pal2C")
let pal2DE = document.getElementById("pal2D")
let pal2EE = document.getElementById("pal2E")
let pal2FE = document.getElementById("pal2F")
let pal30E = document.getElementById("pal30")
let pal31E = document.getElementById("pal31")
let pal32E = document.getElementById("pal32")
let pal33E = document.getElementById("pal33")
let pal34E = document.getElementById("pal34")
let pal35E = document.getElementById("pal35")
let pal36E = document.getElementById("pal36")
let pal37E = document.getElementById("pal37")
let pal38E = document.getElementById("pal38")
let pal39E = document.getElementById("pal39")
let pal3AE = document.getElementById("pal3A")
let pal3BE = document.getElementById("pal3B")
let pal3CE = document.getElementById("pal3C")
let pal3DE = document.getElementById("pal3D")
let pal3EE = document.getElementById("pal3E")
let pal3FE = document.getElementById("pal3F")
let pal40E = document.getElementById("pal40")
let pal41E = document.getElementById("pal41")
let pal42E = document.getElementById("pal42")
let pal43E = document.getElementById("pal43")
let pal44E = document.getElementById("pal44")
let pal45E = document.getElementById("pal45")
let pal46E = document.getElementById("pal46")
let pal47E = document.getElementById("pal47")
let pal48E = document.getElementById("pal48")
let pal49E = document.getElementById("pal49")
let pal4AE = document.getElementById("pal4A")
let pal4BE = document.getElementById("pal4B")
let pal4CE = document.getElementById("pal4C")
let pal4DE = document.getElementById("pal4D")
let pal4EE = document.getElementById("pal4E")
let pal4FE = document.getElementById("pal4F")
let pal50E = document.getElementById("pal50")
let pal51E = document.getElementById("pal51")
let pal52E = document.getElementById("pal52")
let pal53E = document.getElementById("pal53")
let pal54E = document.getElementById("pal54")
let pal55E = document.getElementById("pal55")
let pal56E = document.getElementById("pal56")
let pal57E = document.getElementById("pal57")
let pal58E = document.getElementById("pal58")
let pal59E = document.getElementById("pal59")
let pal5AE = document.getElementById("pal5A")
let pal5BE = document.getElementById("pal5B")
let pal5CE = document.getElementById("pal5C")
let pal5DE = document.getElementById("pal5D")
let pal5EE = document.getElementById("pal5E")
let pal5FE = document.getElementById("pal5F")
let pal60E = document.getElementById("pal60")
let pal61E = document.getElementById("pal61")
let pal62E = document.getElementById("pal62")
let pal63E = document.getElementById("pal63")
let pal64E = document.getElementById("pal64")
let pal65E = document.getElementById("pal65")
let pal66E = document.getElementById("pal66")
let pal67E = document.getElementById("pal67")
let pal68E = document.getElementById("pal68")
let pal69E = document.getElementById("pal69")
let pal6AE = document.getElementById("pal6A")
let pal6BE = document.getElementById("pal6B")
let pal6CE = document.getElementById("pal6C")
let pal6DE = document.getElementById("pal6D")
let pal6EE = document.getElementById("pal6E")
let pal6FE = document.getElementById("pal6F")
let pal70E = document.getElementById("pal70")
let pal71E = document.getElementById("pal71")
let pal72E = document.getElementById("pal72")
let pal73E = document.getElementById("pal73")
let pal74E = document.getElementById("pal74")
let pal75E = document.getElementById("pal75")
let pal76E = document.getElementById("pal76")
let pal77E = document.getElementById("pal77")
let pal78E = document.getElementById("pal78")
let pal79E = document.getElementById("pal79")
let pal7AE = document.getElementById("pal7A")
let pal7BE = document.getElementById("pal7B")
let pal7CE = document.getElementById("pal7C")
let pal7DE = document.getElementById("pal7D")
let pal7EE = document.getElementById("pal7E")
let pal7FE = document.getElementById("pal7F")
let imgElement = document.getElementById('imageSrc');
let widthImage = document.getElementById('widthImage');
let heightImage = document.getElementById('heightImage');
let codeoutput = document.getElementById('codeoutput')
let canvas = document.getElementById('canvas');
let inputElement = document.getElementById('fileInput');
inputElement.addEventListener('change', (e) => {
    imgElement.src = URL.createObjectURL(e.target.files[0]);
    updatePalette()
}, false);

widthImage.addEventListener('input', () => {
    widthValue.textContent = widthImage.value;
});

heightImage.addEventListener('input', () => {
    heightValue.textContent = heightImage.value;
});

document.getElementById("resetpalette").onclick = function(){
    updatePalette();
    StartOpen();
}
function updatePalette() {
    pcDosPalette = {
        "00": (pal0==true)?[0, 0, 0]:[5, 5, 5],       // Black
        "01": (pal1==true)?[0, 0, 170]:[5, 5, 5],     // Blue
        "02": (pal2==true)?[0, 170, 0]:[5, 5, 5],     // Green
        "03": (pal3==true)?[0, 170, 170]:[5, 5, 5],     // Cobalt blue
        "04": (pal4==true)?[170, 0, 0]:[5, 5, 5],     // Red
        "05": (pal5==true)?[170, 0, 170]:[5, 5, 5], // Violet
        "06": (pal6==true)?[170, 85, 0]:[5, 5, 5], // Brown
        "07": (pal7==true)?[170, 170, 170]:[5, 5, 5], // Light grey
        "08": (pal8==true)?[85, 85, 85]:[5, 5, 5], // Dark gray
        "09": (pal9==true)?[85, 85, 255]:[5, 5, 5], // Light blue
        "0A": (palA==true)?[85, 255, 85]:[5, 5, 5], // Light green
        "0B": (palB==true)?[85, 255, 255]:[5, 5, 5], // Sky blue
        "0C": (palC==true)?[255, 85, 85]:[5, 5, 5], // Light red
        "0D": (palD==true)?[255, 85, 255]:[5, 5, 5], // Light violet
        "0E": (palE==true)?[255, 255, 85]:[5, 5, 5], // Yellow
        "0F": (palF==true)?[255, 255, 255]:[5, 5, 5], // White

        //Additional shades of gray

        "10": (pal10==true)?[0, 0, 0]:[5, 5, 5], 
        "11": (pal11==true)?[16, 16, 16]:[5, 5, 5], 
        "12": (pal12==true)?[32, 32, 32]:[5, 5, 5], 
        "13": (pal13==true)?[53, 53, 53]:[5, 5, 5], 
        "14": (pal14==true)?[69, 69, 69]:[5, 5, 5], 
        "15": (pal15==true)?[85, 85, 85]:[5, 5, 5], 
        "16": (pal16==true)?[101, 101, 101]:[5, 5, 5],
        "17": (pal17==true)?[117, 117, 117]:[5, 5, 5], 
        "18": (pal18==true)?[138, 138, 138]:[5, 5, 5], 
        "19": (pal19==true)?[154, 154, 154]:[5, 5, 5], 
        "1A": (pal1A==true)?[170, 170, 170]:[5, 5, 5], 
        "1B": (pal1B==true)?[186, 186, 186]:[5, 5, 5],
        "1C": (pal1C==true)?[202, 202, 202]:[5, 5, 5], 
        "1D": (pal1D==true)?[223, 223, 223]:[5, 5, 5], 
        "1E": (pal1EX==true)?[239, 239, 239]:[5, 5, 5], 
        "1F": (pal1F==true)?[255, 255, 255]:[5, 5, 5],
    
    //Additional tones
        "20": (pal20==true)?[0, 0, 255]:[5, 5, 5],
        "21": (pal21==true)?[65, 0, 255]:[5, 5, 5],
        "22": (pal22==true)?[130, 0, 255]:[5, 5, 5],
        "23": (pal23==true)?[190, 0, 255]:[5, 5, 5],
        "24": (pal24==true)?[255, 0, 255]:[5, 5, 5],
        "25": (pal25==true)?[255, 0, 190]:[5, 5, 5],
        "26": (pal26==true)?[255, 0, 130]:[5, 5, 5],
        "27": (pal27==true)?[255, 0, 60]:[5, 5, 5],
        "28": (pal28==true)?[255, 0, 0]:[5, 5, 5],
        "29": (pal29==true)?[255, 65, 0]:[5, 5, 5],
        "2A": (pal2A==true)?[255, 130, 0]:[5, 5, 5],
        "2B": (pal2B==true)?[255, 190, 0]:[5, 5, 5],
        "2C": (pal2C==true)?[255, 255, 0]:[5, 5, 5],
        "2D": (pal2D==true)?[190, 255, 0]:[5, 5, 5],
        "2E": (pal2E==true)?[230, 255, 0]:[5, 5, 5],
        "2F": (pal2F==true)?[65, 255, 0]:[5, 5, 5],
        "30": (pal30==true)?[0, 255, 0]:[5, 5, 5],
        "31": (pal31==true)?[0, 255, 65]:[5, 5, 5],
        "32": (pal32==true)?[0, 255, 130]:[5, 5, 5],
        "33": (pal33==true)?[0, 255, 190]:[5, 5, 5],
        "34": (pal34==true)?[0, 255, 255]:[5, 5, 5],
        "35": (pal35==true)?[0, 190, 255]:[5, 5, 5],
        "36": (pal36==true)?[0, 130, 255]:[5, 5, 5],
        "37": (pal37==true)?[0, 65, 255]:[5, 5, 5],
        "38": (pal38==true)?[130, 130, 255]:[5, 5, 5],
        "39": (pal39==true)?[158, 130, 255]:[5, 5, 5],
        "3A": (pal3A==true)?[190, 130, 255]:[5, 5, 5],
        "3B": (pal3B==true)?[223, 130, 255]:[5, 5, 5],
        "3C": (pal3C==true)?[255, 130, 255]:[5, 5, 5],
        "3D": (pal3D==true)?[255, 130, 223]:[5, 5, 5],
        "3E": (pal3EX==true)?[255, 130, 190]:[5, 5, 5],
        "3F": (pal3F==true)?[255, 130, 158]:[5, 5, 5],
        "40": (pal40==true)?[255, 130, 130]:[5, 5, 5],
        "41": (pal41==true)?[255, 158, 130]:[5, 5, 5],
        "42": (pal42==true)?[255, 190, 130]:[5, 5, 5],
        "43": (pal43==true)?[255, 223, 130]:[5, 5, 5],
        "44": (pal44==true)?[255, 225, 130]:[5, 5, 5],
        "45": (pal45==true)?[253, 255, 130]:[5, 5, 5],
        "46": (pal46==true)?[190, 255, 130]:[5, 5, 5],
        "47": (pal47==true)?[158, 255, 130]:[5, 5, 5],
        "48": (pal48==true)?[130, 255, 130]:[5, 5, 5],
        "49": (pal49==true)?[130, 255, 158]:[5, 5, 5],
        "4A": (pal4A==true)?[130, 255, 190]:[5, 5, 5],
        "4B": (pal4B==true)?[130, 255, 223]:[5, 5, 5],
        "4C": (pal4C==true)?[130, 255, 225]:[5, 5, 5],
        "4D": (pal4D==true)?[130, 223, 225]:[5, 5, 5],
        "4E": (pal4E==true)?[130, 190, 225]:[5, 5, 5],
        "4F": (pal4F==true)?[130, 158, 225]:[5, 5, 5],
        "50": (pal50==true)?[186, 186, 255]:[5, 5, 5],
        "51": (pal51==true)?[202, 186, 255]:[5, 5, 5],
        "52": (pal52==true)?[223, 186, 255]:[5, 5, 5],
        "53": (pal53==true)?[239, 186, 255]:[5, 5, 5],
        "54": (pal54==true)?[255, 186, 255]:[5, 5, 5],
        "55": (pal55==true)?[255, 186, 239]:[5, 5, 5],
        "56": (pal56==true)?[255, 186, 223]:[5, 5, 5],
        "57": (pal57==true)?[255, 186, 202]:[5, 5, 5],
        "58": (pal58==true)?[255, 186, 186]:[5, 5, 5],
        "59": (pal59==true)?[255, 202, 186]:[5, 5, 5],
        "5A": (pal5A==true)?[255, 223, 186]:[5, 5, 5],
        "5B": (pal5B==true)?[255, 239, 186]:[5, 5, 5],
        "5C": (pal5C==true)?[255, 255, 186]:[5, 5, 5],
        "5D": (pal5D==true)?[239, 255, 186]:[5, 5, 5],
        "5E": (pal5E==true)?[223, 255, 186]:[5, 5, 5],
        "5F": (pal5F==true)?[202, 255, 186]:[5, 5, 5],
        "60": (pal60==true)?[186, 255, 186]:[5, 5, 5],
        "61": (pal61==true)?[186, 255, 202]:[5, 5, 5],
        "62": (pal62==true)?[186, 255, 223]:[5, 5, 5],
        "63": (pal63==true)?[186, 255, 239]:[5, 5, 5],
        "64": (pal64==true)?[186, 255, 255]:[5, 5, 5],
        "65": (pal65==true)?[186, 239, 255]:[5, 5, 5],
        "66": (pal66==true)?[186, 223, 255]:[5, 5, 5],
        "67": (pal67==true)?[186, 202, 255]:[5, 5, 5], //
    
        //Adicionais tons de cores escuras
        "68": (pal68==true)?[0, 0, 113]:[5, 5, 5],
        "69": (pal69==true)?[28, 0, 113]:[5, 5, 5],
        "6A": (pal6A==true)?[57, 0, 113]:[5, 5, 5],
        "6B": (pal6B==true)?[85, 0, 113]:[5, 5, 5],
        "6C": (pal6C==true)?[113, 0, 113]:[5, 5, 5],
        "6D": (pal6D==true)?[113, 0, 85]:[5, 5, 5],
        "6E": (pal6E==true)?[113, 0, 57]:[5, 5, 5],
        "6F": (pal6F==true)?[113, 0, 28]:[5, 5, 5],
        "70": (pal70==true)?[113, 0, 0]:[5, 5, 5],
        "71": (pal71==true)?[113, 28, 0]:[5, 5, 5],
        "72": (pal72==true)?[113, 57, 0]:[5, 5, 5],
        "73": (pal73==true)?[113, 85, 0]:[5, 5, 5],
        "74": (pal74==true)?[113, 113, 0]:[5, 5, 5],
        "75": (pal75==true)?[85, 113, 0]:[5, 5, 5],
        "76": (pal76==true)?[57, 113, 0]:[5, 5, 5],
        "77": (pal77==true)?[28, 113, 0]:[5, 5, 5],
        "78": (pal78==true)?[0, 113, 0]:[5, 5, 5],
        "79": (pal79==true)?[0, 113, 28]:[5, 5, 5],
        "7A": (pal7A==true)?[0, 113, 57]:[5, 5, 5],
        "7B": (pal7B==true)?[0, 113, 85]:[5, 5, 5],
        "7C": (pal7C==true)?[0, 113, 113]:[5, 5, 5],
        "7D": (pal7D==true)?[0, 85, 113]:[5, 5, 5],
        "7E": (pal7E==true)?[0, 57, 113]:[5, 5, 5],
        "7F": (pal7F==true)?[0, 28, 113]:[5, 5, 5],
        /*"80": [57, 57, 113],
        "81": [69, 57, 113],
        "82": [85, 57, 113],
        "83": [97, 57, 113],
        "84": [113, 57, 113],
        "85": [113, 57, 97],
        "86": [113, 57, 85],
        "87": [113, 57, 69],
        "88": [113, 57, 57],
        "89": [113, 69, 57],
        "8A": [113, 85, 57],
        "8B": [113, 97, 57],
        "8C": [113, 113, 57],
        "8D": [97, 113, 57],
        "8E": [85, 113, 57],
        "8F": [69, 113, 57],
        "90": [57, 113, 57],
        "91": [57, 113, 69],
        "92": [57, 113, 85],
        "93": [57, 113, 97],
        "94": [57, 113, 113],
        "95": [57, 97, 113],
        "96": [57, 85, 113],
        "97": [57, 69, 113],
        "98": [81, 81, 113],
        "99": [89, 81, 113],
        "9A": [97, 81, 113],
        "9B": [105, 81, 113],
        "9C": [113, 81, 113],
        "9D": [113, 81, 105],
        "9E": [113, 81, 97],
        "9F": [113, 81, 89],
        "A0": [113, 81, 81],
        "A1": [113, 89, 81],
        "A2": [113, 97, 81],
        "A3": [113, 105, 81],
        "A4": [113, 113, 81],
        "A5": [105, 113, 81],
        "A6": [97, 113, 81],
        "A7": [89, 113, 81],
        "A8": [81, 113, 81],
        "A9": [81, 113, 89],
        "AA": [81, 113, 97],
        "AB": [81, 113, 105],
        "AC": [81, 113, 113],
        "AD": [81, 105, 113],
        "AE": [81, 97, 113],
        "AF": [81, 89, 113],
        "B0": [0, 0, 65],
        "B1": [16, 0, 65],
        "B2": [32, 0, 65],
        "B3": [49, 0, 65],
        "B4": [65, 0, 65],
        "B5": [65, 0, 49],
        "B6": [65, 0, 32],
        "B7": [65, 0, 16],
        "B8": [65, 0, 0],
        "B9": [65, 16, 0],
        "BA": [65, 32, 0],
        "BB": [65, 49, 0],
        "BC": [65, 65, 0],
        "BD": [49, 65, 0],
        "BE": [32, 65, 0],
        "BF": [16, 65, 0],
        "C0": [0, 65, 0],
        "C1": [0, 65, 16],
        "C2": [0, 65, 32],
        "C3": [0, 65, 49],
        "C4": [0, 65, 65],
        "C5": [0, 49, 65],
        "C6": [0, 32, 65],
        "C7": [0, 16, 65],
        "C8": [32, 32, 65],
        "C9": [40, 32, 65],
        "CA": [49, 32, 65],
        "CB": [57, 32, 65],
        "CC": [65, 32, 65],
        "CD": [65, 32, 57],
        "CE": [65, 32, 49],
        "CF": [65, 32, 40],
        "D0": [65, 32, 32],
        "D1": [65, 40, 32],
        "D2": [65, 49, 32],
        "D3": [65, 57, 32],
        "D4": [65, 65, 32],
        "D5": [57, 65, 32],
        "D6": [49, 65, 32],
        "D7": [40, 65, 32],
        "D8": [32, 65, 32],
        "D9": [32, 65, 40],
        "DA": [32, 65, 49],
        "DB": [32, 65, 57],
        "DC": [32, 65, 65],
        "DD": [32, 57, 65],
        "DE": [32, 49, 65],
        "DF": [32, 40, 65],
        "E0": [45, 45, 65],
        "E1": [49, 45, 65],
        "E2": [53, 45, 65],
        "E3": [61, 45, 65],
        "E4": [65, 45, 65],
        "E5": [65, 45, 61],
        "E6": [65, 45, 53],
        "E7": [65, 45, 49],
        "E8": [65, 45, 45],
        "E9": [65, 49, 45],
        "EA": [65, 53, 45],
        "EB": [65, 61, 45],
        "EC": [65, 65, 45],
        "ED": [61, 65, 45],
        "EE": [53, 65, 45],
        "EF": [49, 65, 45],
        "F0": [45, 65, 45],
        "F1": [45, 65, 49],
        "F2": [45, 65, 53],
        "F3": [45, 65, 61],
        "F4": [45, 65, 65],
        "F5": [45, 61, 65],
        "F6": [45, 53, 65],
        "F7": [45, 49, 65],
        "F8": [0, 0, 0],
        "F9": [0, 0, 0],
        "FA": [0, 0, 0],
        "FB": [0, 0, 0],
        "FC": [0, 0, 0],
        "FD": [0, 0, 0],
        "FE": [0, 0, 0],
        "FF": [0, 0, 0]//*/
    };
}

pal0E.onclick = function() {
    if (pal0 == false){
        pal0E.style = "fill:#000000"
        pal0 = true;
    } else {
        pal0E.style = colordisable;
        pal0 = false;
    }
}
pal1E.onclick = function() {
    if (pal1 == false){
        pal1E.style = "fill:#0000AA";
        pal1 = true;
    } else {
        pal1E.style = colordisable;
        pal1 = false;
    }
}
pal2E.onclick = function() {
    if (pal2 == false){
        pal2E.style = "fill:#00AA00";
        pal2 = true;
    } else {
        pal2E.style = colordisable;
        pal2 = false;
    }
}
pal3E.onclick = function() {
    if (pal3 == false){
        pal3E.style = "fill:#00AAAA";
        pal3 = true;
    } else {
        pal3E.style = colordisable;
        pal3 = false;
    }
}
pal4E.onclick = function() {
    if (pal4 == false){
        pal4E.style = "fill:#AA0000";
        pal4 = true;
    } else {
        pal4E.style = colordisable;
        pal4 = false;
    }
}
pal5E.onclick = function() {
    if (pal5 == false){
        pal5E.style = "fill:#AA00AA";
        pal5 = true;
    } else {
        pal5E.style = colordisable;
        pal5 = false;
    }
}
pal6E.onclick = function() {
    if (pal6 == false){
        pal6E.style = "fill:#AA5500";
        pal6 = true;
    } else {
        pal6E.style = colordisable;
        pal6 = false;
    }
}
pal7E.onclick = function() {
    if (pal7 == false){
        pal7E.style = "fill:#AAAAAA";
        pal7 = true;
    } else {
        pal7E.style = colordisable;
        pal7 = false;
    }
}
pal8E.onclick = function() {
    if (pal8 == false){
        pal8E.style = "fill:#555555";
        pal8 = true;
    } else {
        pal8E.style = colordisable;
        pal8 = false;
    }
}
pal9E.onclick = function() {
    if (pal9 == false){
        pal9E.style = "fill:#5555FF";
        pal9 = true;
    } else {
        pal9E.style = colordisable;
        pal9 = false;
    }
}
palAE.onclick = function() {
    if (palA == false){
        palAE.style = "fill:#55FF55";
        palA = true;
    } else {
        palAE.style = colordisable;
        palA = false;
    }
}
palBE.onclick = function() {
    if (palB == false){
        palBE.style = "fill:#55FFFF";
        palB = true;
    } else {
        palBE.style = colordisable;
        palB = false;
    }
}
palCE.onclick = function() {
    if (palC == false){
        palCE.style = "fill:#FF5555";
        palC = true;
    } else {
        palCE.style = colordisable;
        palC = false;
    }
}
palDE.onclick = function() {
    if (palD == false){
        palDE.style = "fill:#FF55FF";
        palD = true;
    } else {
        palDE.style = colordisable;
        palD = false;
    }
}
palEE.onclick = function() {
    if (palE == false){
        palEE.style = "fill:#FFFF55";
        palE = true;
    } else {
        palEE.style = colordisable;
        palE = false;
    }
}
palFE.onclick = function() {
    if (palF == false){
        palFE.style = "fill:#FFFFFF";
        palF = true;
    } else {
        palFE.style = colordisable;
        palF = false;
    }
}
pal10E.onclick = function() {
    if (pal10 == false){
        pal10E.style = "fill:#000000"
        pal10 = true;
    } else {
        pal10E.style = colordisable;
        pal10 = false;
    }
}
pal11E.onclick = function() {
    if (pal11 == false){
        pal11E.style = "fill:#101010";
        pal11 = true;
    } else {
        pal11E.style = colordisable;
        pal11 = false;
    }
}
pal12E.onclick = function() {
    if (pal12 == false){
        pal12E.style = "fill:#202020";
        pal12 = true;
    } else {
        pal12E.style = colordisable;
        pal12 = false;
    }
}
pal13E.onclick = function() {
    if (pal13 == false){
        pal13E.style = "fill:#353535";
        pal13 = true;
    } else {
        pal13E.style = colordisable;
        pal13 = false;
    }
}
pal14E.onclick = function() {
    if (pal14 == false){
        pal14E.style = "fill:#454545";
        pal14 = true;
    } else {
        pal14E.style = colordisable;
        pal14 = false;
    }
}
pal15E.onclick = function() {
    if (pal15 == false){
        pal15E.style = "fill:#555555";
        pal15 = true;
    } else {
        pal15E.style = colordisable;
        pal15 = false;
    }
}
pal16E.onclick = function() {
    if (pal16 == false){
        pal16E.style = "fill:#656565";
        pal16 = true;
    } else {
        pal16E.style = colordisable;
        pal16 = false;
    }
}
pal17E.onclick = function() {
    if (pal17 == false){
        pal17E.style = "fill:#757575";
        pal17 = true;
    } else {
        pal17E.style = colordisable;
        pal17 = false;
    }
}
pal18E.onclick = function() {
    if (pal18 == false){
        pal18E.style = "fill:#8A8A8A";
        pal18 = true;
    } else {
        pal18E.style = colordisable;
        pal18 = false;
    }
}
pal19E.onclick = function() {
    if (pal19 == false){
        pal19E.style = "fill:#9A9A9A";
        pal19 = true;
    } else {
        pal19E.style = colordisable;
        pal19 = false;
    }
}
pal1AE.onclick = function() {
    if (pal1A == false){
        pal1AE.style = "fill:#AAAAAA";
        pal1A = true;
    } else {
        pal1AE.style = colordisable;
        pal1A = false;
    }
}
pal1BE.onclick = function() {
    if (pal1B == false){
        pal1BE.style = "fill:#BABABA";
        pal1B = true;
    } else {
        pal1BE.style = colordisable;
        pal1B = false;
    }
}
pal1CE.onclick = function() {
    if (pal1C == false){
        pal1CE.style = "fill:#CACACA";
        pal1C = true;
    } else {
        pal1CE.style = colordisable;
        pal1C = false;
    }
}
pal1DE.onclick = function() {
    if (pal1D == false){
        pal1DE.style = "fill:#DFDFDF";
        pal1D = true;
    } else {
        pal1DE.style = colordisable;
        pal1D = false;
    }
}
pal1EE.onclick = function() {
    if (pal1EX == false){
        pal1EE.style = "fill:#EFEFEF";
        pal1EX = true;
    } else {
        pal1EE.style = colordisable;
        pal1EX = false;
    }
}
pal1FE.onclick = function() {
    if (pal1F == false){
        pal1FE.style = "fill:#FFFFFF";
        pal1F = true;
    } else {
        pal1FE.style = colordisable;
        pal1F = false;
    }
}
pal20E.onclick = function() {
    if (pal20 == false){
        pal20E.style = "fill:#0000FF"
        pal20 = true;
    } else {
        pal20E.style = colordisable;
        pal20 = false;
    }
}
pal21E.onclick = function() {
    if (pal21 == false){
        pal21E.style = "fill:#4100FF";
        pal21 = true;
    } else {
        pal21E.style = colordisable;
        pal21 = false;
    }
}
pal22E.onclick = function() {
    if (pal22 == false){
        pal22E.style = "fill:#8200FF";
        pal22 = true;
    } else {
        pal22E.style = colordisable;
        pal22 = false;
    }
}
pal23E.onclick = function() {
    if (pal23 == false){
        pal23E.style = "fill:#BE00FF";
        pal23 = true;
    } else {
        pal23E.style = colordisable;
        pal23 = false;
    }
}
pal24E.onclick = function() {
    if (pal24 == false){
        pal24E.style = "fill:#FF00FF";
        pal24 = true;
    } else {
        pal24E.style = colordisable;
        pal24 = false;
    }
}
pal25E.onclick = function() {
    if (pal25 == false){
        pal25E.style = "fill:#FF00BE";
        pal25 = true;
    } else {
        pal25E.style = colordisable;
        pal25 = false;
    }
}
pal26E.onclick = function() {
    if (pal26 == false){
        pal26E.style = "fill:#FF0082";
        pal26 = true;
    } else {
        pal26E.style = colordisable;
        pal26 = false;
    }
}
pal27E.onclick = function() {
    if (pal27 == false){
        pal27E.style = "fill:#FF0041";
        pal27 = true;
    } else {
        pal27E.style = colordisable;
        pal27 = false;
    }
}
pal28E.onclick = function() {
    if (pal28 == false){
        pal28E.style = "fill:#FF0000";
        pal28 = true;
    } else {
        pal28E.style = colordisable;
        pal28 = false;
    }
}
pal29E.onclick = function() {
    if (pal29 == false){
        pal29E.style = "fill:#FF4100";
        pal29 = true;
    } else {
        pal29E.style = colordisable;
        pal29 = false;
    }
}
pal2AE.onclick = function() {
    if (pal2A == false){
        pal2AE.style = "fill:#FF8200";
        pal2A = true;
    } else {
        pal2AE.style = colordisable;
        pal2A = false;
    }
}
pal2BE.onclick = function() {
    if (pal2B == false){
        pal2BE.style = "fill:#FFBE00";
        pal2B = true;
    } else {
        pal2BE.style = colordisable;
        pal2B = false;
    }
}
pal2CE.onclick = function() {
    if (pal2C == false){
        pal2CE.style = "fill:#FFFF00";
        pal2C = true;
    } else {
        pal2CE.style = colordisable;
        pal2C = false;
    }
}
pal2DE.onclick = function() {
    if (pal2D == false){
        pal2DE.style = "fill:#BEFF00";
        pal2D = true;
    } else {
        pal2DE.style = colordisable;
        pal2D = false;
    }
}
pal2EE.onclick = function() {
    if (pal2EX == false){
        pal2EE.style = "fill:#82FF00";
        pal2EX = true;
    } else {
        pal2EE.style = colordisable;
        pal2EX = false;
    }
}
pal2FE.onclick = function() {
    if (pal2F == false){
        pal2FE.style = "fill:#41FF00";
        pal2F = true;
    } else {
        pal2FE.style = colordisable;
        pal2F = false;
    }
}
pal30E.onclick = function() {
    if (pal30 == false){
        pal30E.style = "fill:#00FF00"
        pal30 = true;
    } else {
        pal30E.style = colordisable;
        pal30 = false;
    }
}
pal31E.onclick = function() {
    if (pal31 == false){
        pal31E.style = "fill:#00FF41";
        pal31 = true;
    } else {
        pal31E.style = colordisable;
        pal31 = false;
    }
}
pal32E.onclick = function() {
    if (pal32 == false){
        pal32E.style = "fill:#00FF82";
        pal32 = true;
    } else {
        pal32E.style = colordisable;
        pal32 = false;
    }
}
pal33E.onclick = function() {
    if (pal33 == false){
        pal33E.style = "fill:#00FFBE";
        pal33 = true;
    } else {
        pal33E.style = colordisable;
        pal33 = false;
    }
}
pal34E.onclick = function() {
    if (pal34 == false){
        pal34E.style = "fill:#00FFFF";
        pal34 = true;
    } else {
        pal34E.style = colordisable;
        pal34 = false;
    }
}
pal35E.onclick = function() {
    if (pal35 == false){
        pal35E.style = "fill:#00BEFF";
        pal35 = true;
    } else {
        pal35E.style = colordisable;
        pal35 = false;
    }
}
pal36E.onclick = function() {
    if (pal36 == false){
        pal36E.style = "fill:#0082FF";
        pal36 = true;
    } else {
        pal36E.style = colordisable;
        pal36 = false;
    }
}
pal37E.onclick = function() {
    if (pal37 == false){
        pal37E.style = "fill:#0041FF";
        pal37 = true;
    } else {
        pal37E.style = colordisable;
        pal37 = false;
    }
}
pal38E.onclick = function() {
    if (pal38 == false){
        pal38E.style = "fill:#8282FF";
        pal38 = true;
    } else {
        pal38E.style = colordisable;
        pal38 = false;
    }
}
pal39E.onclick = function() {
    if (pal39 == false){
        pal39E.style = "fill:#9E82FF";
        pal39 = true;
    } else {
        pal39E.style = colordisable;
        pal39 = false;
    }
}
pal3AE.onclick = function() {
    if (pal3A == false){
        pal3AE.style = "fill:#BE82FF";
        pal3A = true;
    } else {
        pal3AE.style = colordisable;
        pal3A = false;
    }
}
pal3BE.onclick = function() {
    if (pal3B == false){
        pal3BE.style = "fill:#DF82FF";
        pal3B = true;
    } else {
        pal3BE.style = colordisable;
        pal3B = false;
    }
}
pal3CE.onclick = function() {
    if (pal3C == false){
        pal3CE.style = "fill:#FF82FF";
        pal3C = true;
    } else {
        pal3CE.style = colordisable;
        pal3C = false;
    }
}
pal3DE.onclick = function() {
    if (pal3D == false){
        pal3DE.style = "fill:#FF82DF";
        pal3D = true;
    } else {
        pal3DE.style = colordisable;
        pal3D = false;
    }
}
pal3EE.onclick = function() {
    if (pal3EX == false){
        pal3EE.style = "fill:#FF82BE";
        pal3EX = true;
    } else {
        pal3EE.style = colordisable;
        pal3EX = false;
    }
}
pal3FE.onclick = function() {
    if (pal3F == false){
        pal3FE.style = "fill:#FF829E";
        pal3F = true;
    } else {
        pal3FE.style = colordisable;
        pal3F = false;
    }
}
pal40E.onclick = function() {
    if (pal40 == false){
        pal40E.style = "fill:#FF8282"
        pal40 = true;
    } else {
        pal40E.style = colordisable;
        pal40 = false;
    }
}
pal41E.onclick = function() {
    if (pal41 == false){
        pal41E.style = "fill:#FF9E82";
        pal41 = true;
    } else {
        pal41E.style = colordisable;
        pal41 = false;
    }
}
pal42E.onclick = function() {
    if (pal42 == false){
        pal42E.style = "fill:#FFBE82";
        pal42 = true;
    } else {
        pal42E.style = colordisable;
        pal42 = false;
    }
}
pal43E.onclick = function() {
    if (pal43 == false){
        pal43E.style = "fill:#FFDF82";
        pal43 = true;
    } else {
        pal43E.style = colordisable;
        pal43 = false;
    }
}
pal44E.onclick = function() {
    if (pal44 == false){
        pal44E.style = "fill:#FFFF82";
        pal44 = true;
    } else {
        pal44E.style = colordisable;
        pal44 = false;
    }
}
pal45E.onclick = function() {
    if (pal45 == false){
        pal45E.style = "fill:#DFFF82";
        pal45 = true;
    } else {
        pal45E.style = colordisable;
        pal45 = false;
    }
}
pal46E.onclick = function() {
    if (pal46 == false){
        pal46E.style = "fill:#BEFF82";
        pal46 = true;
    } else {
        pal46E.style = colordisable;
        pal46 = false;
    }
}
pal47E.onclick = function() {
    if (pal47 == false){
        pal47E.style = "fill:#9EFF82";
        pal47 = true;
    } else {
        pal47E.style = colordisable;
        pal47 = false;
    }
}
pal48E.onclick = function() {
    if (pal48 == false){
        pal48E.style = "fill:#82FF82";
        pal48 = true;
    } else {
        pal48E.style = colordisable;
        pal48 = false;
    }
}
pal49E.onclick = function() {
    if (pal49 == false){
        pal49E.style = "fill:#82FF9E";
        pal49 = true;
    } else {
        pal49E.style = colordisable;
        pal49 = false;
    }
}
pal4AE.onclick = function() {
    if (pal4A == false){
        pal4AE.style = "fill:#82FFBE";
        pal4A = true;
    } else {
        pal4AE.style = colordisable;
        pal4A = false;
    }
}
pal4BE.onclick = function() {
    if (pal4B == false){
        pal4BE.style = "fill:#82FFDF";
        pal4B = true;
    } else {
        pal4BE.style = colordisable;
        pal4B = false;
    }
}
pal4CE.onclick = function() {
    if (pal4C == false){
        pal4CE.style = "fill:#82FFFF";
        pal4C = true;
    } else {
        pal4CE.style = colordisable;
        pal4C = false;
    }
}
pal4DE.onclick = function() {
    if (pal4D == false){
        pal4DE.style = "fill:#82DFFF";
        pal4D = true;
    } else {
        pal4DE.style = colordisable;
        pal4D = false;
    }
}
pal4EE.onclick = function() {
    if (pal4EX == false){
        pal4EE.style = "fill:#82BEFF";
        pal4EX = true;
    } else {
        pal4EE.style = colordisable;
        pal4EX = false;
    }
}
pal4FE.onclick = function() {
    if (pal4F == false){
        pal4FE.style = "fill:#829EFF";
        pal4F = true;
    } else {
        pal4FE.style = colordisable;
        pal4F = false;
    }
}
pal50E.onclick = function() {
    if (pal50 == false){
        pal50E.style = "fill:#BABAFF"
        pal50 = true;
    } else {
        pal50E.style = colordisable;
        pal50 = false;
    }
}
pal51E.onclick = function() {
    if (pal51 == false){
        pal51E.style = "fill:#CABAFF";
        pal51 = true;
    } else {
        pal51E.style = colordisable;
        pal51 = false;
    }
}
pal52E.onclick = function() {
    if (pal52 == false){
        pal52E.style = "fill:#DFBAFF";
        pal52 = true;
    } else {
        pal52E.style = colordisable;
        pal52 = false;
    }
}
pal53E.onclick = function() {
    if (pal53 == false){
        pal53E.style = "fill:#EFBAFF";
        pal53 = true;
    } else {
        pal53E.style = colordisable;
        pal53 = false;
    }
}
pal54E.onclick = function() {
    if (pal54 == false){
        pal54E.style = "fill:#FFBAFF";
        pal54 = true;
    } else {
        pal54E.style = colordisable;
        pal54 = false;
    }
}
pal55E.onclick = function() {
    if (pal55 == false){
        pal55E.style = "fill:#FFBAEF";
        pal55 = true;
    } else {
        pal55E.style = colordisable;
        pal55 = false;
    }
}
pal56E.onclick = function() {
    if (pal56 == false){
        pal56E.style = "fill:#FFBADF";
        pal56 = true;
    } else {
        pal56E.style = colordisable;
        pal56 = false;
    }
}
pal57E.onclick = function() {
    if (pal57 == false){
        pal57E.style = "fill:#FFBACA";
        pal57 = true;
    } else {
        pal57E.style = colordisable;
        pal57 = false;
    }
}
pal58E.onclick = function() {
    if (pal58 == false){
        pal58E.style = "fill:#FFBABA";
        pal58 = true;
    } else {
        pal58E.style = colordisable;
        pal58 = false;
    }
}
pal59E.onclick = function() {
    if (pal59 == false){
        pal59E.style = "fill:#FFCABA";
        pal59 = true;
    } else {
        pal59E.style = colordisable;
        pal59 = false;
    }
}
pal5AE.onclick = function() {
    if (pal5A == false){
        pal5AE.style = "fill:#FFDFBA";
        pal5A = true;
    } else {
        pal5AE.style = colordisable;
        pal5A = false;
    }
}
pal5BE.onclick = function() {
    if (pal5B == false){
        pal5BE.style = "fill:#FFEFBA";
        pal5B = true;
    } else {
        pal5BE.style = colordisable;
        pal5B = false;
    }
}
pal5CE.onclick = function() {
    if (pal5C == false){
        pal5CE.style = "fill:#FFFFBA";
        pal5C = true;
    } else {
        pal5CE.style = colordisable;
        pal5C = false;
    }
}
pal5DE.onclick = function() {
    if (pal5D == false){
        pal5DE.style = "fill:#EFFFBA";
        pal5D = true;
    } else {
        pal5DE.style = colordisable;
        pal5D = false;
    }
}
pal5EE.onclick = function() {
    if (pal5EX == false){
        pal5EE.style = "fill:#DFFFBA";
        pal5EX = true;
    } else {
        pal5EE.style = colordisable;
        pal5EX = false;
    }
}
pal5FE.onclick = function() {
    if (pal5F == false){
        pal5FE.style = "fill:#CAFFBA";
        pal5F = true;
    } else {
        pal5FE.style = colordisable;
        pal5F = false;
    }
}
pal60E.onclick = function() {
    if (pal60 == false){
        pal60E.style = "fill:#BAFFBA"
        pal60 = true;
    } else {
        pal60E.style = colordisable;
        pal60 = false;
    }
}
pal61E.onclick = function() {
    if (pal61 == false){
        pal61E.style = "fill:#BAFFCA";
        pal61 = true;
    } else {
        pal61E.style = colordisable;
        pal61 = false;
    }
}
pal62E.onclick = function() {
    if (pal62 == false){
        pal62E.style = "fill:#BAFFDF";
        pal62 = true;
    } else {
        pal62E.style = colordisable;
        pal62 = false;
    }
}
pal63E.onclick = function() {
    if (pal63 == false){
        pal63E.style = "fill:#BAFFEF";
        pal63 = true;
    } else {
        pal63E.style = colordisable;
        pal63 = false;
    }
}
pal64E.onclick = function() {
    if (pal64 == false){
        pal64E.style = "fill:#BAFFFF";
        pal64 = true;
    } else {
        pal64E.style = colordisable;
        pal64 = false;
    }
}
pal65E.onclick = function() {
    if (pal65 == false){
        pal65E.style = "fill:#BAEFFF";
        pal65 = true;
    } else {
        pal65E.style = colordisable;
        pal65 = false;
    }
}
pal66E.onclick = function() {
    if (pal66 == false){
        pal66E.style = "fill:#BADFFF";
        pal66 = true;
    } else {
        pal66E.style = colordisable;
        pal66 = false;
    }
}
pal67E.onclick = function() {
    if (pal67 == false){
        pal67E.style = "fill:#BACAFF";
        pal67 = true;
    } else {
        pal67E.style = colordisable;
        pal67 = false;
    }
}
pal68E.onclick = function() {
    if (pal68 == false){
        pal68E.style = "fill:#000071";
        pal68 = true;
    } else {
        pal68E.style = colordisable;
        pal68 = false;
    }
}
pal69E.onclick = function() {
    if (pal69 == false){
        pal69E.style = "fill:#1C0071";
        pal69 = true;
    } else {
        pal69E.style = colordisable;
        pal69 = false;
    }
}
pal6AE.onclick = function() {
    if (pal6A == false){
        pal6AE.style = "fill:#390071";
        pal6A = true;
    } else {
        pal6AE.style = colordisable;
        pal6A = false;
    }
}
pal6BE.onclick = function() {
    if (pal6B == false){
        pal6BE.style = "fill:#550071";
        pal6B = true;
    } else {
        pal6BE.style = colordisable;
        pal6B = false;
    }
}
pal6CE.onclick = function() {
    if (pal6C == false){
        pal6CE.style = "fill:#710071";
        pal6C = true;
    } else {
        pal6CE.style = colordisable;
        pal6C = false;
    }
}
pal6DE.onclick = function() {
    if (pal6D == false){
        pal6DE.style = "fill:#710055";
        pal6D = true;
    } else {
        pal6DE.style = colordisable;
        pal6D = false;
    }
}
pal6EE.onclick = function() {
    if (pal6EX == false){
        pal6EE.style = "fill:#710039";
        pal6EX = true;
    } else {
        pal6EE.style = colordisable;
        pal6EX = false;
    }
}
pal6FE.onclick = function() {
    if (pal6F == false){
        pal6FE.style = "fill:#71001C";
        pal6F = true;
    } else {
        pal6FE.style = colordisable;
        pal6F = false;
    }
}
pal70E.onclick = function() {
    if (pal70 == false){
        pal70E.style = "fill:#710000"
        pal70 = true;
    } else {
        pal70E.style = colordisable;
        pal70 = false;
    }
}
pal71E.onclick = function() {
    if (pal71 == false){
        pal71E.style = "fill:#711C00";
        pal71 = true;
    } else {
        pal71E.style = colordisable;
        pal71 = false;
    }
}
pal62E.onclick = function() {
    if (pal72 == false){
        pal72E.style = "fill:#713900";
        pal72 = true;
    } else {
        pal72E.style = colordisable;
        pal72 = false;
    }
}
pal73E.onclick = function() {
    if (pal73 == false){
        pal73E.style = "fill:#715500";
        pal73 = true;
    } else {
        pal73E.style = colordisable;
        pal73 = false;
    }
}
pal74E.onclick = function() {
    if (pal74 == false){
        pal74E.style = "fill:#717100";
        pal74 = true;
    } else {
        pal74E.style = colordisable;
        pal74 = false;
    }
}
pal75E.onclick = function() {
    if (pal75 == false){
        pal75E.style = "fill:#557100";
        pal75 = true;
    } else {
        pal75E.style = colordisable;
        pal75 = false;
    }
}
pal76E.onclick = function() {
    if (pal76 == false){
        pal76E.style = "fill:#397100";
        pal76 = true;
    } else {
        pal76E.style = colordisable;
        pal76 = false;
    }
}
pal77E.onclick = function() {
    if (pal77 == false){
        pal77E.style = "fill:#1C7100";
        pal77 = true;
    } else {
        pal77E.style = colordisable;
        pal77 = false;
    }
}
pal78E.onclick = function() {
    if (pal78 == false){
        pal78E.style = "fill:#007100";
        pal78 = true;
    } else {
        pal78E.style = colordisable;
        pal78 = false;
    }
}
pal79E.onclick = function() {
    if (pal79 == false){
        pal79E.style = "fill:#00711C";
        pal79 = true;
    } else {
        pal79E.style = colordisable;
        pal79 = false;
    }
}
pal7AE.onclick = function() {
    if (pal7A == false){
        pal7AE.style = "fill:#007139";
        pal7A = true;
    } else {
        pal7AE.style = colordisable;
        pal7A = false;
    }
}
pal7BE.onclick = function() {
    if (pal7B == false){
        pal7BE.style = "fill:#007155";
        pal7B = true;
    } else {
        pal7BE.style = colordisable;
        pal7B = false;
    }
}
pal7CE.onclick = function() {
    if (pal7C == false){
        pal7CE.style = "fill:#007171";
        pal7C = true;
    } else {
        pal7CE.style = colordisable;
        pal7C = false;
    }
}
pal7DE.onclick = function() {
    if (pal7D == false){
        pal7DE.style = "fill:#005571";
        pal7D = true;
    } else {
        pal7DE.style = colordisable;
        pal7D = false;
    }
}
pal7EE.onclick = function() {
    if (pal7EX == false){
        pal7EE.style = "fill:#003971";
        pal7EX = true;
    } else {
        pal7EE.style = colordisable;
        pal7EX = false;
    }
}
pal7FE.onclick = function() {
    if (pal7F == false){
        pal7FE.style = "fill:#001C71";
        pal7F = true;
    } else {
        pal7FE.style = colordisable;
        pal7F = false;
    }
}

function findClosestColor(pixel, palette) {
    let minDistance = Infinity;
    let closestColorCode = "00";

    for (const [code, color] of Object.entries(palette)) {
        if (color[0]!=5 || color[1]!=5 || color[2]!=5){
        const distance = Math.sqrt(
            Math.pow(pixel[0] - color[0], 2) +
            Math.pow(pixel[1] - color[1], 2) +
            Math.pow(pixel[2] - color[2], 2)
        );

        if (distance < minDistance) {
            minDistance = distance;
            closestColorIndex = code;
        }
        }
    }

    return closestColorIndex.toString(16);
}

function image_to_bin(image) {
    codeout = "";
    //codeout += `${widthImage.value}${heightImage.value}`
    for(let y = 0; y < image.rows; y++) {
        for(let x = 0; x < image.cols; x++) {
            pixel = image.ucharPtr(y, x);
            closestColorIndex = findClosestColor(pixel, pcDosPalette);
            codeout += `${closestColorIndex}`
        }
    }
    return codeout
}

function binToImage(binCode, width, height) {
    let image = new cv.Mat(height, width, cv.CV_8UC3);
    for(let y = 0; y < height; y++) {
        for(let x = 0; x < width; x++) {
            let colorCode = binCode.substr((y * width + x) * 2, 2);
            let color = pcDosPalette[colorCode] || [0, 0, 0];
            image.ucharPtr(y, x)[0] = color[0];
            image.ucharPtr(y, x)[1] = color[1];
            image.ucharPtr(y, x)[2] = color[2];
        }
    }
    return image;
}

imgElement.onload=StartOpen
function StartOpen() {
    let intwidthImage = parseInt(widthImage.value, 10);
    let intheightImage = parseInt(heightImage.value, 10);
    let newSize = new cv.Size(intwidthImage, intheightImage);
    let uploadedImage = cv.imread(imgElement);
    let resizedImage = new cv.Mat();
    cv.resize(uploadedImage, resizedImage, newSize, cv.INTER_NEAREST);
    cv.imshow(canvas, resizedImage);
    codeoutput.value = image_to_bin(resizedImage)
    let reconstructedImage = binToImage(codeoutput.value, intwidthImage, intheightImage);
    cv.imshow(canvas2, reconstructedImage);
    uploadedImage.delete();
    resizedImage.delete();
};
